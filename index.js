!function(t){function e(e){for(var n,o,r=e[0],c=e[1],s=0,l=[];s<r.length;s++)o=r[s],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&l.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);for(u&&u(e);l.length;)l.shift()()}var n={},i={0:0};var o={};var r={3:function(){return{"./index_bg.js":{__wbindgen_json_parse:function(t,e){return n[2].exports.l(t,e)},__wbg_self_1c83eb4471d9eb9b:function(){return n[2].exports.i()},__wbindgen_object_drop_ref:function(t){return n[2].exports.m(t)},__wbg_static_accessor_MODULE_abf5ae284bffdf45:function(){return n[2].exports.j()},__wbg_require_5b2b5b594d809d9f:function(t,e,i){return n[2].exports.h(t,e,i)},__wbg_crypto_c12f14e810edcaa2:function(t){return n[2].exports.c(t)},__wbg_msCrypto_679be765111ba775:function(t){return n[2].exports.f(t)},__wbindgen_is_undefined:function(t){return n[2].exports.k(t)},__wbg_getRandomValues_05a60bf171bfc2be:function(t){return n[2].exports.d(t)},__wbg_getRandomValues_3ac1b33c90b52596:function(t,e,i){return n[2].exports.e(t,e,i)},__wbg_randomFillSync_6f956029658662ec:function(t,e,i){return n[2].exports.g(t,e,i)},__wbindgen_throw:function(t,e){return n[2].exports.n(t,e)}}}}};function c(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,o){n=i[t]=[e,o]}));e.push(n[2]=s);var l,a=document.createElement("script");a.charset="utf-8",a.timeout=120,c.nc&&a.setAttribute("nonce",c.nc),a.src=function(t){return c.p+""+({}[t]||t)+".js"}(t);var u=new Error;l=function(e){a.onerror=a.onload=null,clearTimeout(d);var n=i[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",u.name="ChunkLoadError",u.type=o,u.request=r,n[1](u)}i[t]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:a})}),12e4);a.onerror=a.onload=l,document.head.appendChild(a)}return({1:[3]}[t]||[]).forEach((function(t){var n=o[t];if(n)e.push(n);else{var i,s=r[t](),l=fetch(c.p+""+{3:"f0911073f35b50592e1c"}[t]+".module.wasm");if(s instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)i=Promise.all([WebAssembly.compileStreaming(l),s]).then((function(t){return WebAssembly.instantiate(t[0],t[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)i=WebAssembly.instantiateStreaming(l,s);else{i=l.then((function(t){return t.arrayBuffer()})).then((function(t){return WebAssembly.instantiate(t,s)}))}e.push(o[t]=i.then((function(e){return c.w[t]=(e.instance||e).exports})))}})),Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(n,i,function(e){return t[e]}.bind(null,i));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t},c.w={};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var a=0;a<s.length;a++)e(s[a]);var u=l;c(c.s=0)}([function(t,e,n){n.e(1).then(n.bind(null,1)).then(t=>{let e;document.querySelector("#btn-6-by-6").addEventListener("click",(function(){r(6,6,5)})),document.querySelector("#btn-10-by-10").addEventListener("click",(function(){r(10,10,16)})),document.querySelector("#btn-15-by-15").addEventListener("click",(function(){r(15,15,30)})),document.getElementById("btn-restart").addEventListener("click",(function(){!function(){let t=o.row,e=o.col,n=o.num_bombs;o.clear(),document.getElementById("game-buttons").style.visibility="hidden",r(t,e,n)}()})),document.getElementById("btn-menu").addEventListener("click",(function(){o.clear(),document.getElementById("menu").style.display="flex",document.getElementById("info").innerHTML="Choose a grid size to start",document.getElementById("game-buttons").style.visibility="hidden"}));var n,i=(n=document.createElement("canvas").getContext("2d"),(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1));const o={canvas:null,start:function(t,n,r){if(null==this.canvas){this.row=t,this.col=n,this.num_bombs=r,this.canvas=document.createElement("canvas");var l=21*e.width()+1,a=21*e.height()+1;this.canvas=(u=l,d=a,f=i,(h=document.createElement("canvas")).width=u*f,h.height=d*f,h.style.width=u+"px",h.style.height=d+"px",h.getContext("2d").setTransform(f,0,0,f,0,0),h),this.ctx=this.canvas.getContext("2d"),this.drawGrid(),this.drawTiles(),this.canvas.addEventListener("click",(function(t){!function(t){var n=s(t);const i=e.tiles(),r=c(n.row,n.col);let l=i[r].flagged,a=i[r].bomb;l||(e.set_visible(n.row,n.col),a&&(e.reveal_all(),document.getElementById("info").innerHTML="You've lost!",document.getElementById("game-buttons").style.visibility="visible"));o.drawGrid(),o.drawTiles(),e.check_victory()&&(document.getElementById("info").innerHTML="You've won!",document.getElementById("game-buttons").style.visibility="visible")}(t)})),this.canvas.oncontextmenu=function(){return!1},this.canvas.addEventListener("contextmenu",(function(t){!function(t){var n=s(t);e.toggle_flag(n.row,n.col),o.drawGrid(),o.drawTiles(),e.check_victory()&&(document.getElementById("info").innerHTML="You've won!",document.getElementById("game-buttons").style.visibility="visible")}(t)})),document.body.insertBefore(this.canvas,document.body.childNodes[2])}var u,d,f,h},clear:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.remove(),this.canvas=null},drawGrid:function(){this.ctx.beginPath(),this.ctx.strokeStyle="#CCCCCC";for(let t=0;t<=e.width();t++)this.ctx.moveTo(21*t+1,0),this.ctx.lineTo(21*t+1,21*e.height()+1);for(let t=0;t<=e.height();t++)this.ctx.moveTo(0,21*t+1),this.ctx.lineTo(21*e.width()+1,21*t+1);this.ctx.stroke()},drawTiles:function(){const t=e.tiles();this.ctx.beginPath();for(let n=0;n<e.height();n++)for(let i=0;i<e.width();i++){const e=c(n,i);let o=t[e].num_bombs,r=t[e].visible,s=t[e].flagged,l=t[e].bomb;!r&&s?(this.ctx.fillStyle="#3e53aa",this.ctx.fillRect(21*i+1,21*n+1,20,20)):r?r&&l?(this.ctx.fillStyle="#bd2823",this.ctx.fillRect(21*i+1,21*n+1,20,20)):(this.ctx.fillStyle="#FFFFFF",this.ctx.fillRect(21*i+1,21*n+1,20,20),this.ctx.fillStyle="#000000",this.ctx.font="15px serif",this.ctx.fillText(o,21*i+10-3,21*(n+1)-5)):(this.ctx.fillStyle="#626262",this.ctx.fillRect(21*i+1,21*n+1,20,20))}this.ctx.stroke()}};function r(n,i,r){e=t.Map.new(n,i,r),o.start(n,i,r),document.getElementById("menu").style.display="none",document.getElementById("info").innerHTML="left click: reveal tile - right click: flag mine"}const c=(t,n)=>t*e.width()+n;function s(t){const n=o.canvas.getBoundingClientRect(),r=o.canvas.width/(n.width*i),c=o.canvas.height/(n.height*i),s=(t.clientX-n.left)*r,l=(t.clientY-n.top)*c;return{row:Math.min(Math.floor(l/21),e.height()-1),col:Math.min(Math.floor(s/21),e.width()-1)}}})}]);